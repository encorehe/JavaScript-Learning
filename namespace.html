<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JavaScript Object Management</title>
    <meta charset="utf-8" />
</head>
<body>
    <script>
        'use strict';
        /*

        refrence: https://developer.mozilla.org/zh-CN/docs/Add-ons/Overlay_Extensions/XUL_School/JavaScript_Object_Management

        The first step to good JavaScript object management is having a namespace,
        or a JavaScript object that contains our code and data, that you know will
        not conflict with Firefox code or other extensions.
        Namespace declaration is best located in a file of its own, so that you
        have this one JS file that should be included in all of your XUL files.

        */

        /**
        *  teafish namespace
        */

        if (typeof teafish == 'undefined') {
            var teafish = {
                _id: null,
                // Initializes this object.
                init: function () {
                    //this.obsService = Cc["@tea.fish/observer-service; 1"].getService(Ci.nsIObserverService);
                },
                module: function () {

                },
                copy: function () {

                },
                create: function () {

                },
                clone: function () {
                    // Handle the 3 simple types, and null or undefined
                    if (null == obj || "object" != typeof obj) return obj;

                    // Handle Date
                    if (obj instanceof Date) {
                        var copy = new Date();
                        copy.setTime(obj.getTime());
                        return copy;
                    }

                    // Handle Array
                    if (obj instanceof Array) {
                        var copy = [];
                        for (var i = 0, len = obj.length; i < len; ++i) {
                            copy[i] = clone(obj[i]);
                        }
                        return copy;
                    }

                    // Handle Object
                    if (obj instanceof Object) {
                        var copy = {};
                        for (var attr in obj) {
                            if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);
                        }
                        return copy;
                    }

                    throw new Error("Unable to copy obj! Its type isn't supported.");
                },
                extend: function () {

                },
                options: function () {

                },
                log: function () {

                },
                matchBrowser: function () {
                    //浏览器检测
                    var ua = navigator.userAgent, tem,
                        M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i) || [];
                    if (/trident/i.test(M[1])) {
                        tem = /\brv[ :]+(\d+(\.\d+)?)/g.exec(ua) || [];
                        return 'IE ' + (tem[1] || '');
                    }
                    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
                    if ((tem = ua.match(/version\/([\.\d]+)/i)) != null) M[2] = tem[1];

                    this._browser = M[0];
                    this._browserVersion = M[1];
                }


            };

            teafish.init();


        };


        /**
        *  JavaScript DOM 高级程序设计 1.2.4 为重用命名空间而进行规划
        *  保持唯一性及不共享(私有)
        */











    </script>
</body>
</html>
